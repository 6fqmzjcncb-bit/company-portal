<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Stok Hareketi - ≈ûirket Portalƒ±</title>
    <link rel="stylesheet" href="/css/style.css?v=2.8">
</head>

<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">üè¢</div>
                <h1 class="sidebar-title">≈ûirket Portalƒ±</h1>
            </div>

            <nav class="sidebar-nav">
                <a href="/dashboard.html" class="nav-item">
                    <span class="nav-icon">üè†</span>
                    <span class="nav-text">Ana Sayfa</span>
                </a>
                <a href="/jobs.html" class="nav-item">
                    <span class="nav-icon">üìã</span>
                    <span class="nav-text">ƒ∞≈ü Listeleri</span>
                </a>
                <a href="/sources.html" class="nav-item">
                    <span class="nav-icon">üì¶</span>
                    <span class="nav-text">Kaynaklar</span>
                </a>
                <a href="/products.html" class="nav-item">
                    <span class="nav-icon">üè∑Ô∏è</span>
                    <span class="nav-text">√úr√ºnler</span>
                </a>

                <div class="nav-divider"></div>


                <a href="/attendance.html" class="nav-item">
                    <span class="nav-icon">üìÖ</span>
                    <span class="nav-text">√áalƒ±≈üma Kaydƒ±</span>
                </a>
                <a href="/salary.html" class="nav-item">
                    <span class="nav-icon">üí∞</span>
                    <span class="nav-text">Maa≈ü Y√∂netimi</span>
                </a>
                <a href="/stock-movements.html" class="nav-item active">
                    <span class="nav-icon">üìä</span>
                    <span class="nav-text">Stok Hareketi</span>
                </a>

                <div class="nav-divider"></div>

                <a href="/admin.html" class="nav-item">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    <span class="nav-text">Y√∂netim</span>
                </a>
            </nav>

            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar">üë§</div>
                    <div class="user-details">
                        <div class="user-name" id="userName">Y√ºkleniyor...</div>
                        <div class="user-role" id="userRole"></div>
                    </div>
                </div>
                <button class="btn-logout" onclick="logout()">√áƒ±kƒ±≈ü Yap</button>
            </div>
        </aside>

        <!--Main Content -->
        <main class="main-content">
            <div class="page-header">
                <h1 class="page-title">üìä Stok Hareket Raporu</h1>
                <div>
                    <button class="btn btn-success" onclick="showInModal()">üì• Stok Giri≈ü</button>
                    <button class="btn btn-danger" onclick="showOutModal()">üì§ Stok √áƒ±kƒ±≈ü</button>
                </div>
            </div>

            <!-- Filters -->
            <div class="card">
                <div class="card-header">
                    <h2>Filtrele</h2>
                </div>
                <div class="card-body">
                    <div
                        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; align-items: end;">
                        <div class="form-group">
                            <label>√úr√ºn</label>
                            <select id="filterProduct" class="input-small">
                                <option value="">T√ºm√º</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Hareket Tipi</label>
                            <select id="filterType" class="input-small">
                                <option value="">T√ºm√º</option>
                                <option value="IN">Giri≈ü</option>
                                <option value="OUT">√áƒ±kƒ±≈ü</option>
                                <option value="ADJUSTMENT">D√ºzenleme</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Ba≈ülangƒ±√ß</label>
                            <input type="date" id="filterStartDate" class="input-small">
                        </div>
                        <div class="form-group">
                            <label>Biti≈ü</label>
                            <input type="date" id="filterEndDate" class="input-small">
                        </div>
                        <div>
                            <button class="btn btn-primary" onclick="loadMovements()">üîç Filtrele</button>
                            <button class="btn btn-secondary" onclick="clearFilters()">‚ùå Temizle</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Movements List -->
            <div class="card">
                <div class="card-header">
                    <h2>Stok Hareketleri</h2>
                </div>
                <div class="card-body">
                    <div class="table-wrapper">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Tarih</th>
                                    <th>Tip</th>
                                    <th>√úr√ºn</th>
                                    <th>Miktar</th>
                                    <th>Kim</th>
                                    <th>Nereden/Nereye</th>
                                    <th>Sebep/Not</th>
                                </tr>
                            </thead>
                            <tbody id="movementList">
                                <tr>
                                    <td colspan="7" class="text-center">Y√ºkleniyor...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Stock IN Modal -->
    <div id="stockInModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üì• Stok Giri≈ü Kaydƒ±</h2>
                <button class="modal-close" onclick="closeModals()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="stockInForm">
                    <div class="form-group">
                        <label>√úr√ºn *</label>
                        <select id="inProduct" required></select>
                    </div>
                    <div class="form-group">
                        <label>Miktar *</label>
                        <input type="number" id="inQuantity" step="0.01" min="0.01" required>
                    </div>
                    <div class="form-group">
                        <label>Kim Getirdi? *</label>
                        <input type="text" id="inBroughtBy" required placeholder="Personel adƒ±">
                    </div>
                    <div class="form-group">
                        <label>Nereden Geldi?</label>
                        <input type="text" id="inSource" placeholder="Tedarik√ßi, ≈üantiye vs.">
                    </div>
                    <div class="form-group">
                        <label>Notlar</label>
                        <textarea id="inNotes" rows="2"></textarea>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeModals()">ƒ∞ptal</button>
                        <button type="submit" class="btn btn-success">Kaydet</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Stock OUT Modal -->
    <div id="stockOutModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üì§ Stok √áƒ±kƒ±≈ü Kaydƒ±</h2>
                <button class="modal-close" onclick="closeModals()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="stockOutForm">
                    <div class="form-group">
                        <label>√úr√ºn *</label>
                        <select id="outProduct" required></select>
                    </div>
                    <div class="form-group">
                        <label>Miktar *</label>
                        <input type="number" id="outQuantity" step="0.01" min="0.01" required>
                    </div>
                    <div class="form-group">
                        <label>Kim Aldƒ±? *</label>
                        <input type="text" id="outTakenBy" required placeholder="Personel adƒ±">
                    </div>
                    <div class="form-group">
                        <label>Nereye Gitti? *</label>
                        <input type="text" id="outDestination" required placeholder="≈ûantiye, proje vs.">
                    </div>
                    <div class="form-group">
                        <label>Sebep</label>
                        <input type="text" id="outReason" placeholder="Kullanƒ±m amacƒ±">
                    </div>
                    <div class="form-group">
                        <label>Notlar</label>
                        <textarea id="outNotes" rows="2"></textarea>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeModals()">ƒ∞ptal</button>
                        <button type="submit" class="btn btn-danger">Kaydet</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="/js/stock-movements.js?v=2.8"></script>
</body>

</html>